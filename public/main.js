function getTime(){var e=new Date;return[e.getMilliseconds()/999,e.getSeconds()/60,e.getMinutes()/60]}function setScales(){d3.select("svg").attr("height",svgHeight).attr("width",svgWidth),radiusScale.range([0,svgHeight/2]),hourScale.rangeBands([-1,svgWidth]),horizonScale.range([svgHeight,0,svgHeight]),legendScale.range([legendMargin,svgWidth-legendMargin])}function setLegend(){legend=svg.selectAll("text").data(labels).attr("x",function(e,t){return legendScale(t)}).attr("y",svgHeight-legendMargin).attr("dy","0.75em").attr("text-anchor",function(e){return e.textAnchor}).style("fill",blue).text(function(e){return e.value})}function setSvgDimensions(){svgWidth=window.innerWidth,svgHeight=window.innerHeight,setScales(),setLegend(),tick(getTime())}function tick(e){hands=svg.selectAll("circle").data(e).transition().duration(frameRate).attr("cx",function(){var e=new Date;return hourScale(e.getHours())}).attr("cy",function(){var e=new Date;return horizonScale(e.getHours())}).attr("r",function(e){return radiusScale(e)}).style("fill",function(e,t){return colorScale(t)})}var time=getTime(),svgWidth=900,svgHeight=600,clock=".clock",frameRate=500,blue="hsl(221, 85%, 22%)",peach="hsl(31, 100%, 50%)",orange="hsl(41, 100%, 50%)",yellow="hsl(51, 100%, 50%)",colorScale=d3.scale.ordinal().domain(d3.range(3)).range([peach,orange,yellow]),maximumTime=[-1,1],radiusScale=d3.scale.linear().domain(maximumTime),hourScale=d3.scale.ordinal().domain(d3.range(24)),horizonScale=d3.scale.linear().domain([0,12,23]),labels=[{value:"AM",textAnchor:"start"},{value:"PM",textAnchor:"end"}],legendMargin=25,legendScale=d3.scale.ordinal().domain(d3.range(labels.length)),svg=d3.select(clock).append("svg").append("g"),hands=svg.selectAll("g").data(time).enter().append("g");hands.append("circle").style("fill",function(e,t){return colorScale(t)});var legend=svg.selectAll("text").data(labels).enter().append("text");setSvgDimensions(),window.onresize=setSvgDimensions,setInterval(function(){var e=getTime();tick(e)},frameRate);